<app-alert
  [message]="alertMessage"
  [class]="alertClass"
  [isVisible]="showAlert"
  [title]="alertTitle"
  [iconClass]="alertIconClass"
></app-alert>

<form *ngIf="jobForm" [formGroup]="jobForm" class="form">
  <h3>
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="35"
      height="35"
      fill="currentColor"
      class="bi bi-arrow-left-circle"
      viewBox="0 0 16 16"
      routerLink="/"
    >
      <path
        fill-rule="evenodd"
        d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z"
      />
    </svg>
    Dados da Vaga
  </h3>
  <div class="row">
    <div class="col-12 col-md-4">
      <label class="form-label">Nome do cargo</label>
      <select
        class="form-select"
        formControlName="title"
        aria-label="Default select example"
      >
        <option value="">Selecione</option>
        <option value="Desenvolvedor Frontend">Desenvolvedor Frontend</option>
        <option value="Desenvolvedor Backend">Desenvolvedor Backend</option>
        <option value="Desenvolvedor Fullstack">Desenvolvedor Fullstack</option>
        <option value="Repositor">Repositor</option>
        <option value="Operador de Caixa">Operador de Caixa</option>
        <option value="Enfermeiro">Enfermeiro</option>
        <option value="Mecânico">Mecânico</option>
      </select>
    </div>
    <div class="col-12 col-md-5">
      <label for="ageUser" class="form-label">Contato</label>
      <input
        type="text"
        name="ageUser"
        id="ageUser"
        class="form-control"
        placeholder="Email ou telefone"
        formControlName="contact"
      />
    </div>
    <div class="col-12 col-md-3">
      <label class="form-label">Nével da vaga</label>
      <select
        class="form-select"
        formControlName="level"
        aria-label="Default select example"
      >
        <option value="">Selecione</option>
        <option value="Estágio">Estágio</option>
        <option value="Jovem Aprendiz">Jovem Aprendiz</option>
        <option value="Efetivo">Efetivo</option>
      </select>
    </div>
  </div>
  <div class="row">
    <div class="col-12 col-md-3">
      <label class="form-label">Modalidade</label>
      <select
        class="form-select"
        formControlName="modality"
        aria-label="Default select example"
      >
        <option value="">Selecione</option>
        <option value="Presencial">Presencial</option>
        <option value="Remoto">Remoto</option>
        <option value="Híbrido">Híbrido</option>
      </select>
    </div>
    <div class="col-12 col-md-3">
      <label class="form-label">Estado</label>
      <select
        class="form-select"
        formControlName="uf"
        aria-label="Default select example"
      >
        <option value="">Selecione</option>
        <option value="AC">AC</option>
        <option value="AL">AL</option>
        <option value="AP">AP</option>
        <option value="AM">AM</option>
        <option value="BA">BA</option>
        <option value="CE">CE</option>
        <option value="DF">DF</option>
        <option value="ES">ES</option>
        <option value="GO">GO</option>
        <option value="MA">MA</option>
        <option value="MT">MT</option>
        <option value="MS">MS</option>
        <option value="MG">MG</option>
        <option value="PA">PA</option>
        <option value="PB">PB</option>
        <option value="PR">PR</option>
        <option value="PE">PE</option>
        <option value="PI">PI</option>
        <option value="RJ">RJ</option>
        <option value="RN">RN</option>
        <option value="RS">RS</option>
        <option value="RO">RO</option>
        <option value="RR">RR</option>
        <option value="SC">SC</option>
        <option value="SP">SP</option>
        <option value="SE">SE</option>
        <option value="TO">TO</option>
      </select>
    </div>
    <div class="col-12 col-md-3">
      <label for="ageUser" class="form-label">Cidade</label>
      <input
        type="text"
        name="ageUser"
        id="ageUser"
        class="form-control"
        placeholder="Insira uma cidade"
        formControlName="locality"
      />
    </div>
    <div class="col-12 col-md-3">
      <label for="ageUser" class="form-label">Salário</label>
      <input
        type="text"
        class="form-control"
        placeholder="Insira um valor"
        formControlName="salary"
        mask="separator.2"
        thousandSeparator="."
        decimalMarker=","
        prefix="R$ "
      />
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <label class="form-label">Sobre a Empresa</label>
      <textarea
        name=""
        id=""
        class="form-control"
        placeholder="Descrição sobre a empresa e seus valores "
        formControlName="aboutCompany"
      ></textarea>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <label for="ageUser" class="form-label">Requisitos</label>
      <textarea
        name=""
        id=""
        class="form-control"
        placeholder="Descrição das requisitos para a vaga"
        formControlName="requirements"
      ></textarea>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <label for="ageUser" class="form-label">Benefícios</label>
      <textarea
        name=""
        id=""
        class="form-control"
        placeholder="Citar os benefícios que serão oferecidos"
        formControlName="benefits"
      ></textarea>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <label class="form-label">Descrição da vaga</label>
      <textarea
        name=""
        id=""
        class="form-control"
        placeholder="Faça uma breve descrição sobre a vaga"
        formControlName="description"
      ></textarea>
    </div>
  </div>
  <div class="d-grid gap-2 d-md-flex" id="button-wrapper">
    <button
      class="btn btn-primary"
      data-bs-toggle="modal"
      data-bs-target="#exampleModal"
      type="button"
    >
      Incluir Perguntas Adicionais
    </button>
    <ng-container *ngIf="isEditing; else submit">
      <button type="button" class="btn btn-primary" (click)="onUpdate()">
        Atualizar dados da vaga<svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          class="bi bi-arrow-right"
          viewBox="0 0 16 16"
        >
          <path
            fill-rule="evenodd"
            d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"
          />
        </svg>
      </button>
    </ng-container>
    <ng-template #submit>
      <button type="button" class="btn btn-primary" (click)="onSubmit()">
        Finalizar cadastro de vaga<svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          fill="currentColor"
          class="bi bi-arrow-right"
          viewBox="0 0 16 16"
        >
          <path
            fill-rule="evenodd"
            d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"
          />
        </svg>
      </button>
    </ng-template>

    <div
      class="modal fade"
      id="exampleModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">
              Adicionar Perguntas
            </h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <div formArrayName="perguntas">
              <div *ngFor="let pergunta of perguntas.controls; let i = index">
                <div class="row">
                  <div class="col-12">
                    <label class="form-label">Adicione sua pergunta</label>
                    <textarea
                      name=""
                      id=""
                      class="form-control"
                      placeholder="Insira aqui a sua pergunta"
                      [formControlName]="i"
                    ></textarea>
                  </div>
                </div>
              </div>
            </div>
            <div class="d-grid" style="margin-top: 1rem">
              <button
                class="btn btn-warning"
                (click)="adicionarPergunta()"
                type="button"
              >
                Adicionar pergunta
              </button>
            </div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Sair
            </button>
            <button
              type="button"
              class="btn btn-warning"
              data-bs-dismiss="modal"
            >
              Confirmar
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>
